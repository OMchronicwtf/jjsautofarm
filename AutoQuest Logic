-- Quest Status Checker Loadie
return function(player)
    local RunService = game:GetService("RunService")
    local checkingEnabled = false
    local connection

    -- Check if player is in a quest
    local function IsInQuest()
        local questFrame = player.PlayerGui:FindFirstChild("Quest") 
            and player.PlayerGui.Quest:FindFirstChild("Mission")
        return questFrame and questFrame.Visible or false
    end

    -- Start loop (optional, for continuous checking)
    local function StartChecking()
        if connection then return end
        connection = RunService.Heartbeat:Connect(function()
            if not checkingEnabled then return end

            local inQuest = IsInQuest()
            -- You can use this value or print it
            print("In Quest:", inQuest)
        end)
    end

    -- Stop checking
    local function StopChecking()
        if connection then
            connection:Disconnect()
            connection = nil
        end
    end

    return {
        IsInQuest = IsInQuest,   -- Returns true/false if player is in a quest
        Start = function() checkingEnabled = true; StartChecking() end,
        Stop = function() checkingEnabled = false; StopChecking() end
    }
end
